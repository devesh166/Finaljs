<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDxrjd3U5PCNnJLlprfZhI3fCaEEyLRwnQ&callback=initMap"
        type="text/javascript"></script>
    <!-- Font Awesome Icon Library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="example.js"></script>
    <link href="style.css" rel="stylesheet" type="text/css">


  




</head>

<body>









    <script>
        $(document).ready(function ($) {
            console.log('Document Ready');
            searchlist();
        });    
    </script>


    <div class="col-md-4 book" id="bookside">
        <h2 id="clinicname"></h2>
        <h3 id="clinicaddress"></h3>
        <h2>__________________________</h2>
        <h4 id="clinicname2"></h4>
        <div class="right_scrollbox">


            <div>
                <pre>Availability &nbsp; <a href="#" class="unavailable">SUN </a> <a href="#" class="available"> MON </a> <a href="#" class="available"> TUE </a><a href="#" class="available"> WED </a><a href="#" class="available"> THR </a> <a href="#" class="available"> FRI </a><a href="#" class="available"> SAT </a></pre>

            </div>
            <pre><a href="#"><button id="time">Time</a></button>  | <a href="#"><button id="amen">Amenities</a></button> </pre>
            <div id="p1">
                <p><input type="date" name="date"></p>
                <nav id="navigation">
                    <ul class="parent">
                        <li><span class="glyphicon glyphicon-cloud"></span>Morning
                            <ul class="child">
                                <pre><a href="#"><li>9:00</li></a></pre>
                                <pre><a href="#"><li>9:15</li></a></pre>
                                <pre><a href="#"><li>9:30</li></a></pre>
                            </ul>
                        </li>

                        <li><span class="glyphicon glyphicon-certificate"></span>Afternoon
                            <ul class="child">
                                <pre><a href="#"><li>12:00</li></a></pre>
                                <pre><a href="#"><li>12:15</li></a></pre>
                                <pre><a href="#"><li>12:30</li></a></pre>
                            </ul>
                        </li>
                        <li><span class="glyphicon glyphicon-globe">Evening</span>
                            <ul class="child">
                                <pre><a href="#"><li>5:00</li></a></pre>
                                <pre><a href="#"><li>5:15</li></a></pre>
                                <pre><a href="#"><li>5:30</li></a></pre>
                            </ul>
                        </li>
                        <li><span class="glyphicon glyphicon-star">Night</span>
                            <ul class="child">
                                <pre><a href="#"><li>8:00</li></a></pre>
                                <pre><a href="#"><li>8:15</li></a></pre>
                                <pre><a href="#"><li>8:30</li></a></pre>
                            </ul>
                        </li>
                    </ul>
            </div>

            <div id="p2">
                <p>
                    <ol>
                        <li>
                            <pre>Car Parking <br>Bus Parking</li></ol></pre>
                </p>
            </div>

            <button type="button" class=" btn-default">Confirm Booking</button>


        </div>
    </div>





    </div>



</body>

</html>
<script type="text/javascript">





    var info;
    // import * as info from './example.json';


    //info = 


    function searchlist() {













        // console.log(info[0].doctorID);

        var container = document.createElement("div");
        container.setAttribute("class", "containerbox");
        container.setAttribute("id", "maindiv")
        // container

        var superRow = document.createElement("div");
        superRow.setAttribute("class", "row");

        var leftRow = document.createElement("div");
        leftRow.setAttribute("class", "col-md-8")
        leftRow.setAttribute("id", "lrow")        //list







        var rightRow = document.createElement("div");
        rightRow.setAttribute("id", "map")
        rightRow.setAttribute("class", "col-md-4")         //map

        var scroll = document.createElement("div");
        scroll.setAttribute("class", "scrollbar")
        scroll.setAttribute("id","style-3")
        scroll.style.height = "300px";
        scroll.setAttribute("style", "height:700px; overflow-y: scroll;")

        var list = document.createElement("ul");


        //array variables
        var listelement = [];
        var buttonid = [];

        // var g=info[0].doctorID;

        for (var el = 0; el < info.length; el++)  // json length
        {   //var g=info[el].doctorID;
            // console.log(g);
            var elementid = "list" + el;


            var hr = document.createElement("HR");
            listelement[el] = document.createElement("li");

            listelement[el].setAttribute("class", "card")
            listelement[el].setAttribute("id", elementid)

            var rowCard = document.createElement("div");
            rowCard.setAttribute("class", "row rowclass")

            var leftCard = document.createElement("div");
            leftCard.setAttribute("class", "col-md-2 leftCard")



            var img = document.createElement("img");
            if (info[el].gender == "male") {
                img.src = "Doctors-Male.jpg";
            } else {
                img.src = "Doctors-Female.jpg";
            }

            img.setAttribute("class", "docimage")
            leftCard.appendChild(img);


            var centerCard = document.createElement("div");
            centerCard.setAttribute("class", "col-md-5 centerCard")
            var docDetails = document.createElement("div");
            docDetails.setAttribute("class", "docDetails");
            var docName = document.createElement("h5");
            docName.setAttribute("class", "m-0");
            var atag = document.createElement("a");
            var nametext = document.createTextNode(info[el].docName)   //docname

            var degree = document.createElement("p");
            var degreetext = document.createTextNode("MBBS,MD,FCCP,FIAMS")
            degree.appendChild(degreetext);
            degree.setAttribute("class","grey-text")                                   //Qualification

            var ratinglist = document.createElement("ul");
            ratinglist.setAttribute("class", "rating")
            var rate = info[el].rating;
            let li = [];                                   //rating
            for (let i = 1; i <= 5; i++) {


                li[i] = document.createElement("li");
                if (i <= rate) {
                    li[i].setAttribute("class", "fa fa-star checked");
                } else {
                    li[i].setAttribute("class", "fa fa-star star1")
                }
                ratinglist.appendChild(li[i]);

            }

            var speciality = document.createElement("p");
            
            speciality.setAttribute("class", "grey-text font-medium mt-3 mb-0")
            var specialitytext = document.createTextNode(info[el].specialization)  //speciality
            speciality.appendChild(specialitytext);



            atag.appendChild(nametext);
            docName.appendChild(atag);
            docDetails.appendChild(docName);
            docDetails.appendChild(degree);
            docDetails.appendChild(ratinglist);
            docDetails.appendChild(speciality);
            centerCard.appendChild(docDetails);







            var rightCard = document.createElement("div");
            rightCard.setAttribute("class", "col-md-5 rightCard")



            var clinicDetails = document.createElement("div");
            clinicDetails.setAttribute("class", "doc-clinic-details pl-md-4 d-flex justify-content-around flex-column h-100");

            var atag1 = document.createElement("a");
            atag1.setAttribute("class", "font14 font-medium");
            var clinitext = document.createTextNode(info[el].address[0].addressLineOne);   //clinic name
            atag1.appendChild(clinitext);


            var distance = document.createElement("p");
            distance.setAttribute("class", "grey-text font12");
            var distancetext = document.createTextNode("1.2" + "km");   //distance
            distance.appendChild(distancetext);





            var price = document.createElement("h5");
            price.setAttribute("class", "m-0");
            var pricetext = document.createTextNode(info[el].cost)   //Price
            price.appendChild(pricetext);

            //buttonid[el] = el;

            var button = document.createElement("button");
            button.type = "button";
            button.setAttribute("id", el)
            button.setAttribute("class", "btn ")
            var buttontext = document.createTextNode("Book");
            button.appendChild(buttontext);
            //<button type="button" class="btn book-appointment btn-primary">Book</button>

            clinicDetails.appendChild(atag1);
            clinicDetails.appendChild(distance);
            clinicDetails.appendChild(price)
            clinicDetails.appendChild(button);
            rightCard.appendChild(clinicDetails)





            rowCard.appendChild(leftCard)
            rowCard.appendChild(centerCard);
            rowCard.appendChild(rightCard);

            listelement[el].appendChild(rowCard);
            listelement[el].appendChild(hr);

            list.appendChild(listelement[el]);

            scroll.appendChild(list);

        }

        leftRow.appendChild(scroll);
        superRow.appendChild(leftRow);
        superRow.appendChild(rightRow);
        container.appendChild(superRow);
        document.body.appendChild(container);

        // for(let j=0;j<20;j++){
        //     let elid ="list"+j;
        //     document.getElementById(elid).addEventListener("click", function(){
        //         document.getElementById(j).style.visibility="visible";
        //     })
        // }


        loadMap();


        for (let k = 0; k < info.length; k++) {
            document.getElementById(k).addEventListener("click", function () {
                loadclinic(k);



            })
        }





        $(function () {
            $('ul.parent>li').hover(function () {
                $(this).find('ul.child').show(400);
            }, function () {
                $(this).find('ul.child').hide(400);
            })
        });

        $(document).ready(function () {
            $("#amen").click(function () {
                $("#p1").hide();
            });
            $("#time").click(function () {
                $("#p1").show();
            })


        });
        $(document).ready(function () {
            $("#time").click(function () {
                $("#p2").hide();
            });
            $("#amen").click(function () {
                $("#p2").show();
            });
        });




    }

    function loadclinic(k) {
        console.log("hii iam inside")
        var text1 = document.createTextNode(info[k].address[0].addressLineOne);
        var text3 = document.createTextNode(info[k].address[0].addressLineOne);
        var text2 = document.createTextNode(info[k].address[0].addressLineTwo);

        document.getElementById("clinicname").appendChild(text1);
       document.getElementById("clinicaddress").appendChild(text2);
        document.getElementById("clinicname2").appendChild(text3);
       document.getElementById("bookside").style.display = "block";
        document.getElementById("map").style.display = "none";

    }

    function loadMap() {
        var a = [];

        for (let i = 0; i < info.length; i++) {


            var b = [];
            var count = 0;
            b[count] = (info[i].doctorID).toString();
            b[++count] = info[i].address[0].gpsCoordinates.gpsLatitude;
            b[++count] = info[i].address[0].gpsCoordinates.gpsLongitude
            a.push(b);
        }
        //console.log(a);

        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 10,
            center: new google.maps.LatLng(28.5088, 77.0923),
        });

        var infowindow = new google.maps.InfoWindow();

        var marker, i;

        for (i = 0; i < a.length; i++) {

            marker = new google.maps.Marker({
                position: new google.maps.LatLng(a[i][1], a[i][2]),
                map: map
            });

            google.maps.event.addListener(marker, 'click', (function (marker, i) {


                return function () {


                    //new google.maps.Size(42,68)
                    //
                    infowindow.setContent(a[i][0]);


                    linker(a[i][0]);
                    infowindow.open(map, marker);



                }
            })(marker, i));
        }
    }
    //var x =0;
    function linker(id) {
        // var id2 = "list" + id;
        // for (let i = 0; i < info.length; i++) {
        //     let id1 = "list" + i;

        //     if (id1 == id2) {

        //         document.getElementById(id1).setAttribute("class", "onhover");
        //         document.getElementById(i).style.visibility = "visible";
        //     } else {
        //         // console.log("else condition");
        //         document.getElementById(id1).setAttribute("class", "card");
        //         document.getElementById(i).setAttribute("class", "btn");
        //     }
        // }
        first = id;
        info.sort(function (x, y) { return x.doctorID == first ? -1 : y.doctorID == first ? 1 : 0; });

        //console.log(info);

        document.body.innerHTML = '';
        searchlist();
        //console.log(info);
        document.getElementById("list0").setAttribute("class", "onhover");
        document.getElementById(0).style.visibility = "visible";
        // location.reload();



    }


</script>